<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <title>Title</title>
</head>
<body onload="fill()">


<form roomTypeName="newRoomsForm" method="POST" action="controller">
    <input type="hidden" roomTypeName="command" value="addNewRooms"/>
    <table>
        <thead>
        <tr>
            <th>roomHotel</th>
            <th>roomType</th>
            <th>roomNumber</th>
            <th>bookingStartDate</th>
            <th>bookingEndDate</th>
            <th>roomTypeStatus</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</form>

<script type="text/javascript">

    function fill() {
        var entityListConst = "entity";
        var fieldOrderConst = "fieldOrder";
        var textJson = '{"entityList":[{"roomTypeId":1,"roomHotel":{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":1,"roomTypeName":"Standard Twin","maxPersons":2,"roomPricePerNight":200,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":1,"bookingStartDate":20,"bookingEndDate":400,"roomTypeStatus":"1"},{"roomTypeId":2,"roomHotel":{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":2,"roomTypeName":"Standard Double","maxPersons":2,"roomPricePerNight":300,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":2,"bookingStartDate":30,"bookingEndDate":500,"roomTypeStatus":"1"},{"roomTypeId":6,"roomHotel":{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":2,"roomTypeName":"Standard Double","maxPersons":2,"roomPricePerNight":300,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":6,"bookingStartDate":70,"bookingEndDate":900,"roomTypeStatus":"1"},{"roomTypeId":8,"roomHotel":{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":4,"roomTypeName":"Standard Single","maxPersons":1,"roomPricePerNight":500,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":8,"bookingStartDate":90,"bookingEndDate":1100,"roomTypeStatus":"1"},{"roomTypeId":9,"roomHotel":{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":1,"roomTypeName":"Standard Twin","maxPersons":2,"roomPricePerNight":200,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":9,"bookingStartDate":100,"bookingEndDate":1200,"roomTypeStatus":"1"},{"roomTypeId":3,"roomHotel":{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":3,"roomTypeName":"Family","maxPersons":3,"roomPricePerNight":400,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":3,"bookingStartDate":40,"bookingEndDate":600,"roomTypeStatus":"0"},{"roomTypeId":4,"roomHotel":{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":4,"roomTypeName":"Standard Single","maxPersons":1,"roomPricePerNight":500,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":4,"bookingStartDate":50,"bookingEndDate":700,"roomTypeStatus":"0"},{"roomTypeId":5,"roomHotel":{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":5,"roomTypeName":"Huge","maxPersons":4,"roomPricePerNight":600,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":5,"bookingStartDate":60,"bookingEndDate":800,"roomTypeStatus":"0"},{"roomTypeId":7,"roomHotel":{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},"roomType":{"roomTypeId":3,"roomTypeName":"Family","maxPersons":3,"roomPricePerNight":400,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},"roomNumber":7,"bookingStartDate":80,"bookingEndDate":1000,"roomTypeStatus":"1"}],"fieldList1":[{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":2,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"U Fontana","discount":0.0,"roomTypeStatus":"1"},{"roomTypeId":1,"hotelLocation":{"roomTypeId":1,"country":"Belarus","city":"Minsk","roomTypeStatus":"1"},"roomTypeName":"Belarus Hotel","discount":0.0,"roomTypeStatus":"1"}],"fieldList2":[{"roomTypeId":2,"roomTypeName":"Standard Double","maxPersons":2,"roomPricePerNight":300,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},{"roomTypeId":4,"roomTypeName":"Standard Single","maxPersons":1,"roomPricePerNight":500,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},{"roomTypeId":3,"roomTypeName":"Family","maxPersons":3,"roomPricePerNight":400,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},{"roomTypeId":5,"roomTypeName":"Huge","maxPersons":4,"roomPricePerNight":600,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"},{"roomTypeId":1,"roomTypeName":"Standard Twin","maxPersons":2,"roomPricePerNight":200,"facilities":["wi-fi","safe"],"roomTypeStatus":"1"}],"fieldOrder":["hotelName","hotelCountry"]}';
        var objectMap = JSON.parse(textJson);
        var entityList = objectMap[entityListConst];
        var fieldsOrder = objectMap[fieldOrderConst];
        var objectMapKeys = Object.keys(objectMap);
        var objectMapKeysLength = objectMapKeys.length;
        var fieldVariants;
        if (objectMapKeysLength == 3) {
            fieldVariants = objectMap[2];
        }

        for (var i = 0; i < entityAmount; i++) {
            var tableRow = $("<tr></tr>");
            $("tbody").append(tableRow);
            var entity = entityList[i];
            getEntityFields(entity);
        }
    }

    function getEntityFields(entity) {
        var entityFields = Object.keys(entity);
        for (let field of entityFields) {
            var fieldValue = entity[field];
            var tableElement;
            if (typeof fieldValue == "object") {
                if (Array.isArray(fieldValue)) {
                    tableElement = getArrayAsString(fieldValue);
                } else {
                    getEntityFields(fieldValue);
                }
            } else {
                tableElement = fieldValue;
            }
            var input = $("<input type='text'>").attr({
                "roomTypeName": field,
                "value": tableElement
            });
            $("tr").last().append("<td></td>");
            $("td").last().prepend(input);
        }
    }

    function getArrayAsString(array) {
        var arrayAsString;
        for (let element of array) {
            if (arrayAsString == undefined) {
                arrayAsString = element;
            } else {
                arrayAsString += ", " + element;
            }
        }
        return arrayAsString;
    }



</script>
</body>
</html>