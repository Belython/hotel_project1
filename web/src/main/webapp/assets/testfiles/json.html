<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <title>Title</title>
</head>
<body onload="fill()">


<form name="newRoomsForm" method="POST" action="controller">
    <input type="hidden" name="command" value="addNewRooms"/>
    <table>
        <thead>
        <tr>
            <th>hotel</th>
            <th>roomType</th>
            <th>roomNumber</th>
            <th>bookingStartDate</th>
            <th>bookingEndDate</th>
            <th>status</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</form>

<script type="text/javascript">
    function main() {
        var json = '{"param1" : "val1", "param2" : {"param3" : "val3", "param4" : "val4"}}';
        var j = JSON.parse(json);
//        alert(j.hasOwnProperty("param2"));
        alert(Object.keys(j["param2"]));
    }

    function fill() {
        var text = '[{"id":1,"hotel":{"id":1,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"Belarus Hotel","discount":0.0,"status":"active"},"roomType":{"id":1,"name":"Standard Twin","maxPersons":2,"roomPricePerNight":200,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":1,"bookingStartDate":20,"bookingEndDate":400,"status":"1"},{"id":2,"hotel":{"id":1,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"Belarus Hotel","discount":0.0,"status":"active"},"roomType":{"id":2,"name":"Standard Double","maxPersons":2,"roomPricePerNight":300,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":2,"bookingStartDate":30,"bookingEndDate":500,"status":"1"},{"id":6,"hotel":{"id":1,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"Belarus Hotel","discount":0.0,"status":"active"},"roomType":{"id":2,"name":"Standard Double","maxPersons":2,"roomPricePerNight":300,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":6,"bookingStartDate":70,"bookingEndDate":900,"status":"1"},{"id":8,"hotel":{"id":1,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"Belarus Hotel","discount":0.0,"status":"active"},"roomType":{"id":4,"name":"Standard Single","maxPersons":1,"roomPricePerNight":500,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":8,"bookingStartDate":90,"bookingEndDate":1100,"status":"1"},{"id":9,"hotel":{"id":1,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"Belarus Hotel","discount":0.0,"status":"active"},"roomType":{"id":1,"name":"Standard Twin","maxPersons":2,"roomPricePerNight":200,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":9,"bookingStartDate":100,"bookingEndDate":1200,"status":"1"},{"id":3,"hotel":{"id":2,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"U Fontana","discount":0.0,"status":"active"},"roomType":{"id":3,"name":"Family","maxPersons":3,"roomPricePerNight":400,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":3,"bookingStartDate":40,"bookingEndDate":600,"status":"0"},{"id":4,"hotel":{"id":2,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"U Fontana","discount":0.0,"status":"active"},"roomType":{"id":4,"name":"Standard Single","maxPersons":1,"roomPricePerNight":500,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":4,"bookingStartDate":50,"bookingEndDate":700,"status":"0"},{"id":5,"hotel":{"id":2,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"U Fontana","discount":0.0,"status":"active"},"roomType":{"id":5,"name":"Huge","maxPersons":4,"roomPricePerNight":600,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":5,"bookingStartDate":60,"bookingEndDate":800,"status":"0"},{"id":7,"hotel":{"id":2,"location":{"id":1,"country":"Belarus","city":"Minsk","status":"active"},"name":"U Fontana","discount":0.0,"status":"active"},"roomType":{"id":3,"name":"Family","maxPersons":3,"roomPricePerNight":400,"facilities":["wi-fi","safe"],"status":"1"},"roomNumber":7,"bookingStartDate":80,"bookingEndDate":1000,"status":"1"}]';
        var entityJson = JSON.parse(text);
        var entityAmount = entityJson.length;
        for (var i = 0; i < entityAmount; i++) {
            var tableRow = $("<tr></tr>");
            $("tbody").append(tableRow);
            var entity = entityJson[i];
            getEntityFields(entity);
        }
    }

    function getEntityFields(entity) {
        var entityFields = Object.keys(entity);
        for (let field of entityFields) {
            var fieldValue = entity[field];
            var tableElement;
            if (typeof fieldValue == "object") {
                if (Array.isArray(fieldValue)) {
                    tableElement = getArrayAsString(fieldValue);
                } else {
                    getEntityFields(fieldValue);
                }
            } else {
                tableElement = fieldValue;
            }
            var input = $("<input type='text'>").attr({
                "name": field,
                "value": tableElement
            });
            $("tr").last().append("<td></td>");
            $("td").last().prepend(input);
        }
    }

    function getArrayAsString(array) {
        var arrayAsString;
        for (let element of array) {
            if (arrayAsString == undefined) {
                arrayAsString = element;
            } else {
                arrayAsString += ", " + element;
            }
        }
        return arrayAsString;
    }


</script>
</body>
</html>